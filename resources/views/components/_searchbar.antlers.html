{{ if search_page:search_active }}

<div id="magnifying-glass" class="flex items-center px-2 space-x-4">

<div id="search_bar" x-cloak x-data="{ showSearch: false, searchQuery: '', searchResults: false }" @keydown.escape="showSearch = (searchQuery !== ''); searchQuery = ''">
    <button type="button" id="search-Button" aria-label="{{ search_page:label }}" class="hidden {{ search_page:show_what === 'labelIcon' ? 'md:flex md:flex-row-reverse' : 'md:flex' }} items-center py-2 px-4 group text-primary  hover:text-white transition font-bold antialiased" @click="showSearch = true; $focus.next()">
        {{ if search_page:show_what === 'icon' || search_page:show_what === 'iconLabel' || search_page:show_what === 'labelIcon' }}
            <svg class="{{ search_page:show_what === 'labelIcon' ? 'ml-3' : 'mr-3' }} text-primary dark:text-secondary transition group-hover:text-white" xmlns="http://www.w3.org/2000/svg" height="21" width="21" viewBox="0 0 16 16"><path d="M15.587 14.413l-4.354-4.353A6.1 6.1 0 0012.5 6.333a6.18 6.18 0 10-2.44 4.907l4.353 4.353a.84.84 0 001.174 0 .833.833 0 000-1.18zM1.833 6.333a4.5 4.5 0 114.5 4.5 4.507 4.507 0 01-4.5-4.5z" fill="currentColor"/></svg>
        {{ /if }}
        {{ if search_page:show_what === 'label' || search_page:show_what === 'iconLabel' || search_page:show_what === 'labelIcon' }}<span>{{ search_page:label }}</span>{{ /if }}
    </button>
    <div
        class="fixed inset-0 z-30 flex flex-col overflow-auto bg-black bg-opacity-50 backdrop-blur-sm p-[12vh]"
        x-cloak
        x-transition.opacity
        x-show="showSearch"
        x-trap.noscroll="showSearch"
    >
        <div class="mx-auto w-full max-w-4xl rounded-lg text-left bg-secondary" click.away="showSearch = false" x-transition @click.outside="showSearch = false; searchQuery = ''">
            <form action="/search" class="flex items-center p-2 px-6">
                <svg class="mr-4 text-primary" xmlns="http://www.w3.org/2000/svg" height="21" width="21" viewBox="0 0 16 16"><path d="M15.587 14.413l-4.354-4.353A6.1 6.1 0 0012.5 6.333a6.18 6.18 0 10-2.44 4.907l4.353 4.353a.84.84 0 001.174 0 .833.833 0 000-1.18zM1.833 6.333a4.5 4.5 0 114.5 4.5 4.507 4.507 0 01-4.5-4.5z" fill="currentColor"/></svg>
                <input name="q" type="text" ref="searchInput" x-model="searchQuery" class="block inline-block w-11/12 bg-transparent py-2 text-white focus-border focus-border-white placeholder:text-primary focus:outline-none" placeholder="{{ search_page:placeholder }}">
                <button class="ml-4 rounded-sm px-1 py-px tracking-wider text-2xs bg-secondary hover:text-white" @click="showSearch = false">ESC</button>
            </form>
        </div>
    </div>
</div>
</div>
{{ /if }}
